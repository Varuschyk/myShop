<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Users</title>
</head>
<body>
    <h1>All Users</h1>

    <form th:action="@{/users/create}">
        <input type="submit" class="btn btn-primary" value="Create User">
    </form>

    <style>
        div.row1{
            display: flex;
            border: 1px solid black;
            font-weight: bold;
        }
        div.row2{
            display: flex;
            border: 1px solid black;
            flex: 1;
            text-align: left;
        }
        div.column{
            display: flex;
            border: 1px solid black;
            flex:1;
        }
    </style>



    <div class="row1">
        <div class="column">No.</div>
        <div class="column">Id</div>
        <div class="column">Full name</div>
        <div class="column">E-mail</div>
        <div class="column">Role</div>
        <div class="column">Stuff list</div>
        <div class="column">Operations</div>
    </div>

    <div class="row2" th:each="user, temp : ${users}">
        <div class="column" th:scope="row" th:text="${temp.index + 1}"/>
        <div class="column" th:text="${user.id}"/>
        <div class="column" th:text="${user.getFullName()}"/>
        <div class="column" th:text="${user.email}"/>
        <div class="column" th:text="${user.role}"/>

        <div class="column" th:if="${user.stuffList.isEmpty()}" th:text="'Cart is empty!'"></div>

        <div th:each="item : ${user.stuffList}">
            <b class="column" th:text="'Name: ' + ${item.name} +' | '+ ' Price: ' + ${item.price}"></b>
        </div>

        <div class="row2">
            <form th:action="@{|/users/read/${user.id}|}">
                <input type="submit" class="btn btn-info" value="Info"/>
            </form>
            &nbsp;
            <form th:action="@{|/users/update/${user.id}|}">
                <input type="submit" class="btn btn-info" value="Edit"/>
            </form>
            &nbsp;
            <form th:action="@{|/users/delete/${user.id}|}">
                <input type="submit" class="btn btn-danger" value="Delete"/>
            </form>
        </div>
    </div>


<!--    <table class="table" border="1">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th scope="col">No .</th>-->
<!--            <th scope="col">Id </th>-->
<!--            <th scope="col">Full name </th>-->
<!--            <th scope="col">E-mail </th>-->
<!--            <th scope="col">Role </th>-->
<!--            <th scope="col">Stuff list </th>-->
<!--            <th scope="col" colspan="2">Operations</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="user, temp : ${users}">-->
<!--            <th th:scope="row" th:text="${temp.index + 1}"/>-->
<!--            <td th:text="${user.id}"/>-->
<!--            <td th:text="${user.getFullName()}"/>-->
<!--            <td th:text="${user.email}"/>-->
<!--            <td th:text="${user.role}"/>-->

<!--            <td th:if="${user.stuffList.isEmpty()}" th:text="'Cart is empty!'"></td>-->

<!--            <td th:each="item : ${user.stuffList}">-->
<!--                <b th:text="'Name: ' + ${item.name} +' | '+ ' Price: ' + ${item.price}"></b>-->
<!--            </td>-->

<!--            <td>-->
<!--                <div class="row">-->
<!--                <form th:action="@{/users/read/${user.id}}"><button>Info</button> </form>-->
<!--                <form th:action="@{/users/update/${user.id}}"><button>Edit</button> </form>-->
<!--                <form th:action="@{/users/delete/${user.id}}"><button>Delete</button> </form>-->
<!--                </div>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

    <br>
    <form th:action="@{/home}">
        <input type="submit" class="btn btn-primary" value="Back to home page"/>
    </form>


</body>
</html>